<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Hr Mitra" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <%= javascript_importmap_tags %>

    <style>
      /* Bottom-right fixed alert boxes */
      .flash-message {
        position: fixed;
        bottom: 20px;
        right: 20px;
        min-width: 250px;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        font-weight: bold;
        z-index: 9999;
        animation: slideUp 0.5s ease;
      }

      .flash-message.notice {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      .flash-message.alert {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeeba;
      }

      @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .flash-message button {
        background: transparent;
        border: none;
        font-weight: bold;
        font-size: 1rem;
        float: right;
        cursor: pointer;
        color: inherit;
      }
    </style>
  </head>

  <body>
    <!-- Flash messages -->
    <% if notice %>
      <div class="flash-message notice" id="flashNotice">
        <button onclick="document.getElementById('flashNotice').style.display='none'">&times;</button>
        <%= notice %>
      </div>
    <% end %>

    <% if alert %>
      <div class="flash-message alert" id="flashAlert">
        <button onclick="document.getElementById('flashAlert').style.display='none'">&times;</button>
        <%= alert %>
      </div>
    <% end %>

    <%= yield %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
      // Auto-hide flash messages after 4 seconds
      setTimeout(() => {
        const notice = document.getElementById('flashNotice');
        if (notice) notice.style.display = 'none';
        const alert = document.getElementById('flashAlert');
        if (alert) alert.style.display = 'none';
      }, 4000);
    </script>
  </body>
</html>
